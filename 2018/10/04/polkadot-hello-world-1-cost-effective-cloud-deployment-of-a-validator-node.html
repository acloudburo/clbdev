<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta content="IE=edge;chrome=1" http-equiv="X-UA-Compatible" />
    <title>dev@cloudburo | Polkadot Hello World #1: Cost-Effective Cloud Deployment of a Validator Node</title>
    <meta content="width=device-width, initial-scale=1" name="viewport" />
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/feed.xml" /><!--[if lt IE 9]><script src="../../../js/ie8.js"></script><![endif]--><link href="../../../css/all.css" rel="stylesheet" /><script type="text/javascript">
      (function(d,e,j,h,f,c,b){d.GoogleAnalyticsObject=f;d[f]=d[f]||function(){(d[f].q=d[f].q||[]).push(arguments)},d[f].l=1*new Date();c=e.createElement(j),b=e.getElementsByTagName(j)[0];c.async=1;c.src=h;b.parentNode.insertBefore(c,b)})(window,document,"script","//www.google-analytics.com/analytics.js","ga");ga("create","UA-35696879-1", location.hostname);ga("send","pageview");
    </script>
    <link href="/favicon.png" rel="icon" type="image/png" />
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro%3A400%2C400italic%2C700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet" />
    <!--HTML5 shiv for IE8 support--><!--[if lt IE 9]
    | <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script-->
  </head>
  <body>
    <div class="col-sm-3 sidebar" id="secondary" style="display: none;">
      <aside>
        <div class="about">
          <h4>
            <a class="sidebarlink" href="/"><i class="fa fa-chevron-right"></i>    Home     <i class="fa fa-home"></i></a>
          </h4>
          <h4>
            <a class="sidebarlink" href="/menu1.html"><i class="fa fa-chevron-right"></i>    About   </a>
          </h4>
          <h4>
            <a class="sidebarlink" href="/menu2.html"><i class="fa fa-chevron-right"></i>    Contact   </a>
          </h4>
        </div>
        <div class="tags">
          <h4>
            Categories
          </h4>
          <ul class="list-unstyled">
            <a href="/tags/ai.html" class="label label-default">ai (2)</a>
            <a href="/tags/api.html" class="label label-default">api (2)</a>
            <a href="/tags/architecture.html" class="label label-default">architecture (26)</a>
            <a href="/tags/aws.html" class="label label-default">aws (13)</a>
            <a href="/tags/banking.html" class="label label-default">banking (6)</a>
            <a href="/tags/bigdata.html" class="label label-default">bigdata (2)</a>
            <a href="/tags/blockchain.html" class="label label-default">blockchain (17)</a>
            <a href="/tags/bots.html" class="label label-default">bots (2)</a>
            <a href="/tags/cloud.html" class="label label-default">cloud (3)</a>
            <a href="/tags/crypto.html" class="label label-default">crypto (1)</a>
            <a href="/tags/datascience.html" class="label label-default">datascience (3)</a>
            <a href="/tags/deutsch.html" class="label label-default">deutsch (1)</a>
            <a href="/tags/devops.html" class="label label-default">devops (1)</a>
            <a href="/tags/diagram.html" class="label label-default">diagram (1)</a>
            <a href="/tags/docker.html" class="label label-default">docker (10)</a>
            <a href="/tags/ethereum.html" class="label label-default">ethereum (2)</a>
            <a href="/tags/futurework.html" class="label label-default">futureWork (5)</a>
            <a href="/tags/gdpr.html" class="label label-default">gdpr (3)</a>
            <a href="/tags/googleapps.html" class="label label-default">googleapps (1)</a>
            <a href="/tags/gradle.html" class="label label-default">gradle (3)</a>
            <a href="/tags/identity.html" class="label label-default">identity (1)</a>
            <a href="/tags/inspiration.html" class="label label-default">inspiration (13)</a>
            <a href="/tags/intellij.html" class="label label-default">intellij (1)</a>
            <a href="/tags/javatutorial.html" class="label label-default">javatutorial (4)</a>
            <a href="/tags/journalism.html" class="label label-default">journalism (2)</a>
            <a href="/tags/legal.html" class="label label-default">legal (1)</a>
            <a href="/tags/marketing.html" class="label label-default">marketing (2)</a>
            <a href="/tags/meteor.html" class="label label-default">meteor (5)</a>
            <a href="/tags/microservice.html" class="label label-default">microservice (18)</a>
            <a href="/tags/ml.html" class="label label-default">ml (2)</a>
            <a href="/tags/modeling.html" class="label label-default">modeling (1)</a>
            <a href="/tags/personaldata.html" class="label label-default">personalData (4)</a>
            <a href="/tags/platform.html" class="label label-default">platform (2)</a>
            <a href="/tags/polkadot.html" class="label label-default">polkadot (5)</a>
            <a href="/tags/python.html" class="label label-default">python (6)</a>
            <a href="/tags/quicktips.html" class="label label-default">quicktips (18)</a>
            <a href="/tags/shift.html" class="label label-default">shift (4)</a>
            <a href="/tags/smallhints.html" class="label label-default">smallhints (13)</a>
            <a href="/tags/startup.html" class="label label-default">startup (11)</a>
            <a href="/tags/teambuilding.html" class="label label-default">teambuilding (2)</a>
            <a href="/tags/tut01.html" class="label label-default">tut01 (6)</a>
            <a href="/tags/tutorial.html" class="label label-default">tutorial (10)</a>
          </ul>
        </div>
        <div class="timeline">
          <h4>
            By year
          </h4>
          <ul class="list-unstyled">
            <a href="/2019.html" class="label label-primary">2019 (8)</a>
            <a href="/2018.html" class="label label-primary">2018 (33)</a>
            <a href="/2017.html" class="label label-primary">2017 (18)</a>
            <a href="/2016.html" class="label label-primary">2016 (16)</a>
            <a href="/2015.html" class="label label-primary">2015 (35)</a>
            <a href="/2014.html" class="label label-primary">2014 (10)</a>
          </ul>
        </div>
      </aside>
    </div>
    <!--/#secondary-->
    <div class="col-sm-12" id="primary">
      <div class="content">
        <header class="header">
          <hgroup class="pull-left">
            <h1 class="site-title">
              <a href="/">dev@cloudburo</a>
            </h1>
          </hgroup>
          <div class="btn btn-primary pull-right" id="togglesidebar">
            <i class="fa fa-bars"></i>
          </div>
        </header>
        <section class="post">
          <header class="entry-header">
            <h2 class="entry-title">
              <a href="/2018/10/04/polkadot-hello-world-1-cost-effective-cloud-deployment-of-a-validator-node.html">Polkadot Hello World #1: Cost-Effective Cloud Deployment of a Validator Node</a>
            </h2>
            <p class="entry-meta">
              Posted on  04.Oct 2018 | Tags <a class="label label-primary" href="/tags/blockchain.html">blockchain</a> <a class="label label-primary" href="/tags/tutorial.html">tutorial</a> <a class="label label-primary" href="/tags/polkadot.html">polkadot</a> 
            </p>
          </header>
          <div class="entry-description">
            <div class="row">
              <div class="article">
                <p><span/></p>
                
                <p><div>
                   <span style="font-style: italic;">This tutorial is based on Polkadot POC2. </span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    The following article series “Polkadot Hello World&quot; describes the steps and findings during my personal kickoff phase in the area of the Polkadot multi-chain framework.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    In the last months, I was extensively researching projects in the area of blockchain and crypto with the goal to find a challenging visionary project, which allows me to build up know how and experience in this topic. 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    The project should be in the early inception phase in order to allow me to collect valuable insights about the evolvement of such an open source decentralized Web project (also known as Web 3).
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    I’m a strong believer that the decentralized Web - driven amongst others by the various Blockchain and Crypto innovations - will be the next big thing. 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    You know I’m an IT veteran, which was starting programming with the  ZX81 back in 1981 (in Basic), moved forward with Pascal, Modula, Oberon to Java JDK 1.0 (1996), followed by Perl, TCL, Groovy, Javascript and a multitude of other languages and landed now for the next year(s) with Rust (which is a safe, concurrent system programming language, ideally for crypto and blockchain work). 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/0d76bc24d108c999a74a3c022626d095.jpeg'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    So I have seen in the last three decades several phases and tectonic shifts of the internet, which started initially purely in a decentralized manner (in the 70’ies with the ARPANET) and shifted to a heavy centralized internet nowadays.<br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/89e21d9d8731b78912ef5b80d50b051b.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    There is a big shift in front of us, or as Josh Stark, states in his Medium Article “
                   <a href="https://medium.com/l4-media/making-sense-of-web-3-c1a9e74dcae">Making Sense of Web 3</a>”:
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">&ldquo;Over the last decade internet-based services have trended towards centralization. Today, a handful of companies control the platforms we use to search for information, store our personal data, manage our online identities, and communicate publicly and privately.</span>
                  </div>
                  <div>
                   <span style="font-style: italic;">At the same time, a group of seemingly unrelated technologies are being developed on the fringes of the tech industry, ranging from encrypted messaging to digital money. Within that loose community, “web 3” has become a catchall term for a vision of a new, better internet. An internet where payments and money are natively digital, where “decentralized” applications compete with centralized ones, and where users have more control over their identity and data.&rdquo;</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    One of the most innovative and interesting projects in this area is Polkadot.  Polkadot has the vision for a heterogeneous multi-chain framework, which connects blockchains and enables applications and smart contracts on one blockchain to seamlessly transact data and assets on other chains. You can find a good overview of the
                   <a href="https://github.com/w3f/polkadot-light-paper/blob/master/Polkadot-lightpaper.pdf">Polkadot Light Paper</a>. 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Behind the Polkadot Framework stands Dr Gavin Wood, who is one of the founders of Ethereum, as well as Partiy. Parity is the company behind Polkadot and its roadmap foresees a going live date around Q3/2019 (DOT-token sales phase). So enough time to  ramp up know how and watch how the product evolves and solves the challenges laid out in the white paper.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    I have to say it requires quite some reading to get an initial basic understanding of the framework, but there is enough documentation material available as well as a vibrant community on
                   <a href="https://riot.im/app/#/room/%23polkadotnoobs:matrix.org">riot</a>.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">Let’s get started then</span></span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    The first exercise I did, was the deployment of a Polkadot Verification Node  as a dockerized cloud instance. I call it the “Hello World of the Polkadot Framework”. It’s quite straightforward and results  - after some hours of syncing of the existing 1.5 million blocks -  in a connected and synchronised Validator Node on the Polkadot “Krumme Lenke Test Network” (which is reflecting the POC-2 state of the project).
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    On the below screenshot, you see my node “clb-polkadancer” which is connected with 24 peers and processes around every five seconds a new block and adds it to its local blockchain (
                   <a href="https://telemetry.polkadot.io/">telemetry user interface</a>) 
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/a34c370aa72087a8ee92da6ebaf299b9.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                    Be aware that the article covers the instantiating of the Polkadot Validator Node on Docker. To convert it to a fully trusted Polkadot validator node - which participates actively in the Proof of Stake (POS) consensus process -  requires additional steps and will be covered in another blog article.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    The Validator is one of the four basic roles which upkeeps a Polkadot network. The other three roles are
                  </div>
                  <div>
                   <br>
                  </div>
                  <ul>
                   <li>
                    <div>
                      Collator
                    </div></li>
                   <li>
                    <div>
                      Nominator
                    </div></li>
                   <li>
                    <div>
                      Fishermen
                    </div></li>
                  </ul>
                  <div>
                   <br>
                  </div>
                  <div>
                    Gavin Wood, depicts in his white paper the 4 roles and its interactions, as follows:
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/77d655e48624d9f77c7900ba4998195d.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    I will not go into the details here about the various role (refer to the
                   <a href="https://polkadot.network/PolkaDotPaper.pdf">white paper</a>) but just provide the Validator definition out of the white paper.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">&ldquo;A validator is the highest charge and helps seal new blocks on the Polkadot network. The validator’s role is contingent upon a sufficiently high bond being deposited, though we allow other bonded parties to nominate one or more validators to act for them and as such, some portion of the validator’s bond may not necessarily be owned by the validator itself but rather by these nominators.&rdquo;</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    So what is his primary task then? 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">&ldquo;A validator must run a relay-chain client implementation with high availability and bandwidth. At each block the node must be ready to accept the role of ratifying a new block on a nominated parachain. This process involves receiving, validating and republishing candidate blocks”.</span>
                  </div>
                  <div>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Ok, there are two new concepts introduced “relay-chain” and “parachain”, which may be new for you and are core concepts within Polkadot. Let’s try to explain them quickly not going too much into the detail by using the summary of the white paper:
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">&quot;Polkadot is a scalable heterogeneous multi-chain. This means that unlike previous blockchain implementations which have focused on providing a single chain of varying degrees of generality over potential applications, Polkadot itself is designed to provide no inherent application functionality at all. Rather, Polkadot provides the bedrock “</span>
                   <span style="font-style: italic; font-weight: bold;">relay-chain</span>
                   <span style="font-style: italic;">” upon which a large number of validatable, globally-coherent dynamic data-structures may be hosted side-by-side. We call these data-structures “parallelised” chains or </span>
                   <span style="font-style: italic; font-weight: bold;">parachains</span>
                   <span style="font-style: italic;">, though there is no specific need for them to be blockchain in nature.&rdquo;</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Got it? So our Validator Node is part of the relay-chain and receives blocks and - in case the blocks belong to our managed parachain - will seal them in its fully synchronized parachain database. If the block belongs to a parachain which isn&rsquo;t in our scope, then 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">&ldquo;… it is expected that the validator will nominate the task of devising a suggested new parachain block to a third-party, known as a collator.”</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <i> 
                   <img class='article  img-thumbnail' src='/images/cd1e6b78b2615912de40621969441873.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></i>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    So let’s get now a “highest charge” Polkadot role node up and running. 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Just one last comment, highest charge has some stringent non-functional requirements: 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">&ldquo;A validator must run a relay-chain client implementation with <span style="font-style: italic; font-weight: bold; text-decoration: underline;">high availability and bandwidth</span></span>
                   <span style="font-style: italic; font-weight: bold; text-decoration: underline;">”</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    So in case you want to get nominated as approved Validator you must ensure that you run the node in a 7x24 fashion in order to stay in sync with the evolvement of your global parachain. Otherwise, the fishermen will detect this bad behaviour and punish you and potentially kicks you out of the consensus validator role.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    As one can see below,  around every 5 seconds a new block is processed with a propagation time of 502 ms. Your node has to be ready to process and propagate such requests in a timely fashion.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/e6dc4a80ef577930a2f139b4fbbced1b.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Running a validator on your personal laptop or desktop may not be a good idea, so a Cloud-managed Validator Node is the way to go.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 18px; font-weight: bold;">Finding a suitable Cloud-Provider</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    In the recent years, I was testing out and using various Cloud Providers (AWS, Google …) in order to run my side-project micro business, which is offering a subscription-based product called “Cloudburo Publishing Bot”. The solution allows you to manage your website(s) directly out of Evernote. 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">As a side-note: For example this article was initially written completely in Evernote and published directly to my </span>
                   <a href="https://dev.cloudburo.net/2018/10/04/polkadot-hello-world-1-cost-effective-cloud-deployment-of-a-validator-node.html" style="font-style: italic;">website</a>
                   <span style="font-style: italic;">. If you are interested in such an blogging approach, head over to my </span>
                   <a href="https://publishingbot.cloudburo.net/" style="font-style: italic;">PublishingBot</a>
                   <span style="font-style: italic;"> site and get a free basic registration.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    So having invested quite heavily in AWS Elastic Beanstalk I switched over recently to the 
                   <a href="https://jelastic.com/">Jelastic Platform-as-a-Service </a>platform, which provides an excellent Pay-as-you-use pricing model, ideally for micro business requirements (I could reduce my monthly costs substantially).
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Another aspect which is really striking with Jelastic is, that there is zero service provider lock-in! 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-style: italic;">Jelastic PaaS offering is available across 60+ data centers in 30 countries worldwide. The infrastructure and local support are provided by the proven hosting partners listed in Cloud Union. Users can host their applications within hardware regions of a single provider or across multiple using the same technology</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    As for example, in my case, I’m running my Jelastic PaaS with a local Swiss vendor (
                   <a href="https://hidora.com/">Hidora - Flex Swiss Cloud</a>) in a data center in the Swiss Jurisdiction (no US tampering), but have the freedom to move my instances to any Service provider world-wide to data centres which may be under control of local service providers and not controlled by a centralized enterprise.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/ff445b2c5dc25f83df21320c1f932b7e.png'></p>
                
              </div>
              <div class="article">
                <p><span/><br>
                  </div>
                  <div>
                   <font style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">Cloudlets the base for the Pay-as-you-use pricing model</span></font>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Jelastic PaaS prices are flexible and scalable. They are based on actual consumption so your bill reflects exactly what you use per hour.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    This pricing model is based on resource units called “cloudlets”. Each cloudlet accounts for 400 MHz of processor speed and 128 MB of RAM.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 12px; color: rgb(84, 84, 84); font-family: arial;"> 
                   <img class='article  img-thumbnail' src='/images/c78ee616e7203bdae97255652a05bf31.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Jelastic PaaS offers you two types of cloudlets:
                  </div>
                  <ul>
                   <li>
                    <div>
                      Reserved Cloudlets – a type of cloudlets that allows to get significant automatic discount rates. A number of resources you reserve beforehand and pay for it whether you spent all resources or not.
                    </div></li>
                   <li>
                    <div>
                      Dynamic Cloudlets – a type of cloudlets that allows you to pay based on your actual resource usage. Set your maximum resource consumption and the Dynamic cloudlets will add and remove automatically depending on your site load.
                    </div></li>
                  </ul>
                  <div>
                   <br>
                  </div>
                  <div>
                    So after deployment of an application, you have to do some fine-tuning in the context of the reserved cloudlets in order to get an optimal prize. This can be easily done via the Dashboard in real-time without restarting any instance.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    As we see later, it allows you to tune the cloudlets in real-time and check if there is an impact on your node block propagation time in the Polkadot Net. 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 18px; font-weight: bold;">Preparing a Validator Dockerfile</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    All my cloud projects (be it a Java based Bot or a Meteor Node.js based frontend) I run in a Docker container. This allowed me to standardise and automate the deployment and runtime configuration and tuning. So it was clear for me to deploy the validator node in a Docker image as well.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Polkadot already provides its own Docker Image “
                   <a href="https://hub.docker.com/r/chevdor/polkadot/">chevdor/polkadot</a>”, which is based on the &ldquo;phusion/baseimage:0.10.1” which maps to the newest Ubuntu release 18.04.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Unfortunately,  Jelastic PaaS is not Ubuntu 18.04 ready, so I changed the Dockerfile to be based on Ubuntu release 16.04 and made it available via Docker Hub under the name “
                   <a href="https://hub.docker.com/r/talfco/clb-polkadot/">talfco/clb-polkadot</a>&rdquo;
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 18px; font-weight: bold;">Configuring the Validator Docker Instance</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Within the Hidora PaaS I created a new Docker Environment “polkadotDocker” and loaded my  clb-polkadot Docker image from Docker Hub.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    The initial instance configuration for the resynchronization phase was 4-5 cloudlets, which gets translated to a CPU between 1.6 GHz - 2.0 GHz with 512 MB to 640 MB.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 12px; color: rgb(51, 51, 51); font-family: Monaco;"> 
                   <img class='article  img-thumbnail' src='/images/e15d3f04ae779f8bdd032dc06e821a4f.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);">I configured the Polkadot database directory to be persisted on the servers local file system, in order not to lose our full parachain db after a re-deployment of a new docker image.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);"> 
                   <img class='article  img-thumbnail' src='/images/9057789db66dfab2ca987c58bfeb7c36.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);">Finally,I added </span>
                   <span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51);">—</span>
                   <span style="color: rgb(51, 51, 51);">name ‘clb-polkadancer’ parameter to the entry point.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);"> 
                   <img class='article  img-thumbnail' src='/images/7705796c96d9f27c5501e69b7cd44dea.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <font style="font-size: 18px;"><span style="font-size: 18px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;; font-weight: bold;">Running your Node</span></font>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">That</span>
                   <span style="caret-color: rgb(51, 51, 51); color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">’</span>
                   <span style="color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">s it. I started the instance, the log file will show the progress of the Syncing.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);"> 
                   <img class='article  img-thumbnail' src='/images/4e291f394700167a3968a8687e942fee.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">Head over to the </span>
                   <span style="color: rgb(51, 51, 51);"><a href="https://telemetry.polkadot.io/"><a href="https://telemetry.polkadot.io/">https://telemetry.polkadot.io/</a></a> where you should see your Validator instance and the syncing progress as well.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);"> 
                   <img class='article  img-thumbnail' src='/images/d2489b7f87a11cc56cf6146530818522.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <font style="font-size: 18px;"><span style="font-size: 18px; color: rgb(51, 51, 51); font-weight: bold;">Building up a copy of the parachain DB</span></font>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(51, 51, 51);">As a first step, the Validator node has to build up the complete parachain db on your local node.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 14px; color: rgb(51, 51, 51); font-family: &quot;Helvetica Neue&quot;;">As one can see in the below screenshot the chain build phase - which got finished around 14:30 -  was using all CPU. After completion, the CPU usage was reduced to 200-250 MHz. To build up the full parachain of around 5 million blocks 6 hours of processing was required.  Overall disk consumption is around 5 GB.</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/74915a2514f74ca1d8c45dd6232aab40.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                    Having loaded the full parachain it’s time to reconfigure the instance. The first instance configuration tested out consisted of  2 cloudlets which get translated into 256 MB RAM and a CPU of 800 MHz.
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/448285659fb1865b73115233fa3701f4.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <span style="font-size: 18px; font-weight: bold;">Fine Tuning the Cloudlets</span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    An assessment of the runtime statistics showed, that upper RAM limit (which is for 2 cloudlets  256 MB) of our node is always topped, which results in additional dynamic cloudlet charges, which is suboptimal.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/66c0f9f99db4e12aeee1099318709ce9.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                    So let’s re-adjust our instance to 3 cloudlets, which results in a<br>
                  </div>
                  <ul>
                   <li>
                    <div>
                     <span style="font-weight: bold;">384 MB RAM </span>
                    </div></li>
                   <li>
                    <div>
                     <span style="font-weight: bold;">1.2 GHz CPU </span>
                    </div></li>
                   <li>
                    <div>
                     <span style="font-weight: bold;">(10 GB of Disk)</span>
                    </div></li>
                  </ul>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/c41c76786b61f518c8d48d7459dae28e.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    As one can see in the above dashboard with 3 cloudlets configured for an instance, we can keep CPU, RAM, Network, Disk and IOPS below the upper limit. So this is the ideal configuration to run a Polkadot Validator Node.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    A special look has to be taken for the Network traffic. The Validator is quite a bandwidth hungry process, you have to expect a network bandwidth of around 100-300 MB/min.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <font face="Helvetica Neue" style="font-size: 18px;"><span style="font-size: 18px; font-family: &quot;Helvetica Neue&quot;; font-weight: bold;">So what’s price to run a Validator Node 7x24 ?</span></font>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 14px;">An instance with 3 reserved Cloudlets, results in 24x3 = 72 Cloudlets per day which is charged with 0.22 CHF  (around 0.20 USD). There is no Paid Traffic charges, because 1.4 TB/per month is free, which is more than enough to cover the bandwidth of the node.</span>
                  </div>
                  <div>
                   <font style="font-size: 14px;"><br></font>
                  </div>
                  <div>
                   <span style="font-size: 14px;">As one can also see, there is an additional charge of 0.20 CHF per day for a Public IP4 address. This one is required due to the fact that we have to open port 30333 for public access, which requires that the instance has a public IP address as well. </span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/a293e5ba0319a79f191615994ab65874.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 18px;"><span style="font-size: 18px; font-weight: bold;">Don’t forget: Opening the port </span></span>
                   <span style=" font-size: 18px; color: rgb(69, 69, 69); font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif; font-weight: bold;">30333</span>
                  </div>
                  <div>
                   <span style=""><span style="font-size: 14px; color: rgb(69, 69, 69); font-family: &quot;Open Sans&quot;, Arial, Helvetica, sans-serif;">As one can see on this screenshot, certain nodes have only connections with half of the peers (24). My node was also showing that behaviour in the beginning as well. </span></span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="color: rgb(69, 69, 69); font-family: &quot;Open Sans&quot;;"> 
                   <img class='article  img-thumbnail' src='/images/1801f6a1c8c7b59ed73c2254d14c7be7.png'></p>
                
              </div>
              <div class="article">
                <p><span/> <br></span>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    With the help of the Polkadot Beginner Lounge on Riot I could quickly solve this problem. My Docker Instance was exposing some general purpose ports, but not 30333 used by the Polkadot Validator.
                  </div>
                  <div>
                    In the context of my PaaS, it was necessary to associate a Public IP with my node to open the port, which results in the above 0.20 CHF per day.
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/8f1283012855cfe8e475e84a468b748c.png'></p>
                
              </div>
              <div class="article">
                <p><span/>         <br>
                  </div>
                  <div>
                    All in all, a full Validator is charged 0.42 CHF per day, which results in monthly costs of around the price of 2 Starbuck coffees in Switzerland or 3 in Tokyo. So dependent on your global location you have to adjust your coffee consumption slightly that you can run your own Polkadot Validator node.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div></p>
                
                <p><img class='article  img-thumbnail' src='/images/12779f4e857876e39cc302f1bbfaf832.png'></p>
                
              </div>
              <div class="article">
                <p><span/><br>
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    That’s it for today, in the next article we will transform our Polkadot Validator in an 
                   <span style="text-decoration: underline;">official</span> Validator which will take part in the Proof of Stake (POS) consensus process.
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                    Stay tuned … 
                  </div>
                  <div>
                   <br>
                  </div>
                  <div>
                   <span style="font-size: 11px; font-style: italic;">This blog entry was fully produced within Evernote and published using the </span>
                   <a href="https://publishingbot.cloudburo.net/" style="font-size: 11px; font-style: italic;">Cloudburo Publishing Bot</a>
                   <span style="font-size: 11px; font-style: italic;">.</span>
                  </div></p>
                
              </div>
            </div>
          </div>
          <div class="comments">
            <div id="disqus_thread">
              <div id="disqus_thread"></div>
              <script type="text/javascript">
              //<![CDATA[
                                var disqus_shortname = 'dev1cloudburo';
                        
                  (function() {
                      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                  })();
              //]]>
              </script>
              <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
              <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
              
              <script type="text/javascript">
              //<![CDATA[
                  var disqus_shortname = 'dev1cloudburo';
                  (function () {
                      var s = document.createElement('script'); s.async = true;
                      s.type = 'text/javascript';
                      s.src = '//' + disqus_shortname + '.disqus.com/count.js';
                      (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
                  }());
              //]]>
              </script>
              
            </div>
          </div>
        </section><footer class="footer">
          <p>
          </p>
          <div class="socials-footer"><a href="https://twitter.com/talfco" class="btn btn-twitter">
                <i class="fa fa-twitter"></i></a><a href="https://www.facebook.com/Cloudburonet-897759390318816/" class="btn btn-facebook">
                <i class="fa fa-facebook"></i></a><a href="https://plus.google.com/u/1/b/102868953630532463137/+CloudburoCh/posts" class="btn btn-google-plus">
                <i class="fa fa-google-plus"></i></a><a href="https://www.linkedin.com/in/felixk" class="btn btn-linkedin">
                <i class="fa fa-linkedin"></i></a><a href="https://github.com/talfco" class="btn btn-github">
                <i class="fa fa-github"></i></a>
          </div>
          <p>
            © 2019 All rights reserved 
          </p>
        </footer>
      </div>
    </div>
    <script src="../../../js/all.js"></script>
  </body>
</html>